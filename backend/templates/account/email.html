{% load static allauth i18n %}
{% block content %}
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
{% load static allauth i18n %}
{% block content %}
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<style>
  :root {
    --panel-red: #609926;
    --panel-dark-green: #2e3626;
    --panel-bg: #f4f6f8;
  }

  html, body {
    height: 100%;
  }

  body {
    display: flex;
    align-items: center;
    padding: 40px 0;
    background-color: var(--panel-bg);
    color: var(--panel-dark-green);
  }

  a {
    color: var(--panel-red);
  }

  a:hover {
    color: #435233;
    text-decoration: none;
  }

  .form-signin {
    width: 100%;
    max-width: 420px;
    padding: 24px;
    margin: auto;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(20, 33, 66, 0.15);
    text-align: center;
  }

  .form-signin h1,
  .form-signin h2 {
    color: var(--panel-dark-green);
  }

  .form-control {
    padding: 12px;
    font-size: 16px;
    border-radius: 4px;
  }

  .form-control:focus {
    border-color: var(--panel-red);
    box-shadow: 0 0 0 0.2rem rgba(207, 20, 43, 0.25);
  }

  .btn-primary {
    background-color: var(--panel-red);
    border-color: var(--panel-red);
    font-weight: 600;
  }

  .btn-primary:hover,
  .btn-primary:focus {
    background-color: #609926;
    border-color: #609926;
  }

  .btn-outline-secondary {
    font-weight: 500;
  }

  .btn-danger {
    font-weight: 600;
  }

  .email-list {
    text-align: left;
  }

  .custom-control-label {
    cursor: pointer;
  }

  .badge-success {
    background-color: #28a745;
  }

  .badge-warning {
    background-color: #ffc107;
    color: #212529;
  }

  .badge-info {
    background-color: var(--panel-dark-green);
  }

  .badge + .badge {
    margin-left: 4px;
  }

  .text-muted {
    color: #6c757d !important;
  }

  .copyright {
    font-size: 0.9rem;
  }
</style>

<div class="container-fluid text-center">

  <div class="form-signin">


    <h1 class="h3 mb-3 font-weight-normal">
      {% trans "Email Addresses" %}
    </h1>

    {% if emailaddresses %}
      <p class="text-muted small mb-3">
        {% trans "The following email addresses are associated with your account:" %}
      </p>

      {% url 'account_email' as email_url %}
      <form method="post" action="{{ email_url }}" class="email-list">
        {% csrf_token %}

        {% for radio in emailaddress_radios %}
          {% with emailaddress=radio.emailaddress %}
            <div class="custom-control custom-radio mb-2">
              <input
                type="radio"
                class="custom-control-input"
                id="{{ radio.id }}"
                name="email"
                value="{{ emailaddress.email }}"
                {% if radio.checked %}checked{% endif %}
              >
              <label class="custom-control-label" for="{{ radio.id }}">
                {{ emailaddress.email }}

                {% if emailaddress.verified %}
                  <span class="badge badge-success">
                    {% trans "Verified" %}
                  </span>
                {% else %}
                  <span class="badge badge-warning">
                    {% trans "Unverified" %}
                  </span>
                {% endif %}

                {% if emailaddress.primary %}
                  <span class="badge badge-info">
                    {% trans "Primary" %}
                  </span>
                {% endif %}
              </label>
            </div>
          {% endwith %}
        {% endfor %}

        <div class="mt-3">
          <button
            class="btn btn-primary btn-block"
            type="submit"
            name="action_primary"
          >
            {% trans "Make Primary" %}
          </button>

          <button
            class="btn btn-outline-secondary btn-block mt-2"
            type="submit"
            name="action_send"
          >
            {% trans "Re-send Verification" %}
          </button>

          <button
            class="btn btn-danger btn-block mt-2"
            type="submit"
            name="action_remove"
          >
            {% trans "Remove" %}
          </button>
        </div>
      </form>
    {% else %}
      {% include "account/snippets/warn_no_email.html" %}
    {% endif %}

    {% if can_add_email %}
      <hr class="my-4">

      <h2 class="h5 mb-3">
        {% trans "Add Email Address" %}
      </h2>

      {% url 'account_email' as action_url %}
      <form method="post" action="{{ action_url }}">
        {% csrf_token %}

        {% for field in form %}
          <div class="form-group text-left">
            <label for="{{ field.id_for_label }}">
              {{ field.label }}
            </label>
            <input
              type="{{ field.field.widget.input_type }}"
              name="{{ field.name }}"
              id="{{ field.id_for_label }}"
              class="form-control {% if field.errors %}is-invalid{% endif %}"
              value="{{ field.value|default_if_none:'' }}"
              required
            >
            {% if field.errors %}
              <div class="invalid-feedback d-block">
                {{ field.errors|striptags }}
              </div>
            {% endif %}
          </div>
        {% endfor %}

        <button
          class="btn btn-primary btn-block"
          type="submit"
          name="action_add"
        >
          {% trans "Add Email" %}
        </button>
      </form>
    {% endif %}

    <p class="mt-5 mb-3 text-muted copyright">
      Copyright &copy; RansomNegotiator.
      All Rights Reserved.
    </p>

  </div>

</div>
{% endblock content %}